# RouteEditor 利用者の手引

**バージョン**: 2.0
**作成日**: 2025年10月17日

---

## 目次

1. [はじめに](#1-はじめに)
2. [起動方法](#2-起動方法)
3. [画面構成](#3-画面構成)
4. [基本操作](#4-基本操作)
5. [GeoJSONファイルの読み込み](#5-geojsonファイルの読み込み)
6. [GeoJSONファイルの出力](#6-geojsonファイルの出力)
7. [ルート編集機能](#7-ルート編集機能)
8. [スポット編集機能](#8-スポット編集機能)
9. [地図の操作方法](#9-地図の操作方法)
10. [マーカーの見方](#10-マーカーの見方)
11. [トラブルシューティング](#11-トラブルシューティング)
12. [よくある質問](#12-よくある質問)

---

## 1. はじめに

### 1.1 RouteEditorとは
RouteEditorは、国土地理院の地図上でGPS座標データ（GeoJSON形式）を視覚的に確認・編集するためのWebアプリケーションです。

### 1.2 主な用途
- ハイキングルートのGPSデータの確認と編集
- ルート上の中間点の追加・移動・削除
- スポット（休憩所、施設等）の追加・移動・削除
- 地図上でのポイント・ルート・スポットの表示
- GeoJSONデータの入出力管理

### 1.3 必要な環境
- **ブラウザ**: Chrome 90+、Edge 90+、Firefox 89+、Safari 14+
- **インターネット接続**: 地図タイルの読み込みに必要
- **ローカルサーバー**: 開発環境での動作に必要

---

## 2. 起動方法

### 2.1 ローカル環境での起動

**ステップ1: ローカルサーバーを起動**

RouteEditorはES6モジュールを使用しているため、ローカルHTTPサーバーが必要です。

**Pythonを使う場合:**
```bash
# RouteEditorフォルダに移動
cd /path/to/RouteEditor

# ローカルサーバーを起動
python -m http.server 8000
```

**npxを使う場合:**
```bash
# RouteEditorフォルダに移動
cd /path/to/RouteEditor

# ローカルサーバーを起動
npx serve .
```

**ステップ2: ブラウザでアクセス**

ブラウザで以下のURLを開きます:
```
http://localhost:8000
```

### 2.2 Webサーバーでの公開（オプション）

RouteEditorをWebサーバーに配置すれば、URLアクセスだけで使用できます。

---

## 3. 画面構成

### 3.1 全体レイアウト

```
┌─────────────────────────────────────────────────┐
│                                   ┌───────────┐ │
│                                   │ 制御パネル│ │
│                                   │           │ │
│           地図エリア              │モード選択 │ │
│     （国土地理院地図）            │●GeoJSON   │ │
│                                   │○ルート編集│ │
│                                   │○スポット編│ │
│                                   │           │ │
│                                   │パネル表示 │ │
│                          ┌─┐     └───────────┘ │
│                          │+│                     │
│                          ├─┤                     │
│                          │-│                     │
│                          └─┘                     │
│                        ズーム                    │
│                      ┌────────┐                  │
│                      │1km     │                  │
│                      └────────┘                  │
│                      スケール                    │
└─────────────────────────────────────────────────┘
```

### 3.2 制御パネル（右上）

**モード選択**（ラジオボタン）:
- ● ファイルの入出力(GeoJSON) ← デフォルト
- ○ ルートの位置編集
- ○ スポットの位置編集

選択されたモードに応じて、下部のパネルが切り替わります。

### 3.3 GeoJSONパネル（ファイル入出力モード）

```
┌──────────────────────────────┐
│ GeoJSONファイルの入出力      │
├──────────────────────────────┤
│ [読み込み]  ファイル    1    │
│ [出力]      ポイント   25 点 │
│             ルート      3 本 │
│             スポット    5 個 │
└──────────────────────────────┘
```

### 3.4 ルートパネル（ルート編集モード）

```
┌──────────────────────────────┐
│ ルート詳細情報               │
├──────────────────────────────┤
│ 絞り込み [T▼] [T15▼] [↻]   │
│ ルート   [T15～T16 (5)▼]    │
│                              │
│ [追加] [移動] [削除]        │
│ [最適化] [クリア]           │
└──────────────────────────────┘
```

### 3.5 スポットパネル（スポット編集モード）

```
┌──────────────────────────────┐
│ スポット詳細情報             │
├──────────────────────────────┤
│ スポット数   5               │
│ スポット [選択してください▼]│
│ 選択スポット [仮1         ] │
│                              │
│ [追加・移動] [削除]         │
└──────────────────────────────┘
```

### 3.6 地図コントロール（右下）

- **ズームボタン**: 地図の拡大・縮小
  - **[+]**: ズームイン（拡大）
  - **[-]**: ズームアウト（縮小）
- **スケール**: 地図上の距離を示すスケールバー

---

## 4. 基本操作

### 4.1 地図の初期表示

アプリケーションを起動すると、箕面大滝（大阪府箕面市）を中心とした地図が表示されます。

- **初期中心座標**: 北緯34.853667度、東経135.472041度
- **初期ズームレベル**: 15（詳細表示）

### 4.2 操作の流れ

**基本フロー**:
1. **ファイル読み込み**: GeoJSONファイルを選択して読み込む
2. **地図確認**: 地図上に表示されたポイント・ルート・スポットを確認
3. **編集**: ルートまたはスポットを編集（必要に応じて）
4. **ファイル出力**: 編集後のGeoJSONファイルを出力

**モード切り替え**:
- ラジオボタンでモードを切り替えると、対応するパネルが表示されます
- モード切り替え時、前のモードのアクティブな編集状態は自動的に解除されます

---

## 5. GeoJSONファイルの読み込み

### 5.1 読み込み手順

**ステップ1: ファイル入出力モードを選択**

制御パネルで「ファイルの入出力(GeoJSON)」ラジオボタンを選択します。

**ステップ2: 読み込みボタンをクリック**

GeoJSONパネルの「読み込み」ボタンをクリックします。

**ステップ3: ファイルを選択**

ファイル選択ダイアログが開くので、読み込みたいGeoJSONファイル（`.geojson` または `.json`）を選択します。

**ステップ4: 自動表示**

- 地図上にデータが表示されます
  - ポイントGPS: 緑色の円形マーカー
  - ルート中間点: 橙色の菱形マーカー
  - スポット: 青色の正方形マーカー
- 地図範囲が自動的にデータ全体を含むように調整されます
- 統計情報（ファイル数、ポイント数、ルート数、スポット数）が更新されます
- 画面中央に「GeoJSONファイルを読み込みました」というメッセージが3秒間表示されます

### 5.2 対応ファイル形式

- **拡張子**: `.geojson`, `.json`
- **形式**: GeoJSON FeatureCollection
- **座標系**: WGS84（EPSG:4326）
- **文字エンコーディング**: UTF-8

### 5.3 読み込みエラー

以下の場合、エラーメッセージが表示されます（6秒間）:

- ファイル形式が不正
- JSON構文エラー
- GeoJSON構造が不正

**エラーメッセージ例**:
```
ファイルの読み込みに失敗しました: Unexpected token ...
```

---

## 6. GeoJSONファイルの出力

### 6.1 出力手順

**ステップ1: データを読み込む**

先にGeoJSONファイルを読み込んでおく必要があります。

**ステップ2: ファイル入出力モードを選択**

制御パネルで「ファイルの入出力(GeoJSON)」ラジオボタンを選択します。

**ステップ3: 出力ボタンをクリック**

GeoJSONパネルの「出力」ボタンをクリックします。

**ステップ4: 保存場所を選択**

**Chrome/Edge等（File System Access API対応ブラウザ）の場合:**
- 保存ダイアログが表示されます
- ファイル名: `MapGPS-yyyymmdd_Pxx_Rxx_Sxx.geojson`
  - `yyyymmdd`: 日付（例: 20251017）
  - `Pxx`: ポイント数
  - `Rxx`: ルート数
  - `Sxx`: スポット数
- 例: `MapGPS-20251017_P25_R3_S5.geojson`
- 保存場所を選択して「保存」をクリック

**Firefox/Safari等（非対応ブラウザ）の場合:**
- ブラウザのデフォルトダウンロードフォルダに自動保存されます
- ファイル名は同じく統計情報付き形式

**ステップ5: 完了メッセージ**

画面中央に「GeoJSONファイルを出力しました」というメッセージが3秒間表示されます。

### 6.2 出力ファイル名

- **フォーマット**: `MapGPS-yyyymmdd_Pxx_Rxx_Sxx.geojson`
- **日付**: 出力した日付（システム日付）
- **統計**: ポイント数、ルート数、スポット数

### 6.3 出力エラー

**データ未読み込みの場合:**

GeoJSONファイルを読み込んでいない状態で「出力」ボタンをクリックすると、以下のメッセージが表示されます（4.5秒間）:

```
出力するデータがありません。先にGeoJSONファイルを読み込んでください。
```

**保存キャンセルの場合:**

保存ダイアログでキャンセルした場合、メッセージは表示されません。

---

## 7. ルート編集機能

### 7.1 ルート編集モードの開始

**ステップ1: ファイルを読み込む**

先にGeoJSONファイルを読み込んでおく必要があります。

**ステップ2: ルート編集モードを選択**

制御パネルで「ルートの位置編集」ラジオボタンを選択します。

ルートパネルが表示され、以下の機能が使用できます：
- ルート選択（3段階絞り込みドロップダウン）
- 中間点の追加・移動・削除
- ルートの最適化・クリア

### 7.2 ルートの選択

ルート編集を行う前に、対象ルートを選択する必要があります。

**3段階絞り込み**:

1. **開始点の頭文字で絞り込み** (`routeStart`)
   - ドロップダウンからルートの開始点または終了点のID頭文字を選択
   - 例: "T" を選択 → "T" で始まるポイントを含むルートのみ表示

2. **ポイントIDで絞り込み** (`routeEnd`)
   - ドロップダウンから具体的なポイントIDを選択
   - 例: "T15" を選択 → "T15" を含むルートのみ表示

3. **ルートを選択** (`routePath`)
   - ドロップダウンから目的のルートを選択
   - フォーマット: `開始ポイント ～ 終了ポイント (中間点数)`
   - 例: `T15 ～ T16 (5)`

**ルートハイライト**:

ルートを選択すると、地図上で以下のようにハイライト表示されます：
- 開始・終了ポイント: 緑色 → **赤色**
- ルート中間点: 橙色 → **赤色**
- ルート線: **赤色の線**で表示

**リセット**:

「↻」ボタンをクリックすると、すべてのドロップダウンとハイライトがリセットされます。

### 7.3 中間点の追加

**ステップ1: ルートを選択**

ドロップダウンで対象ルートを選択します。

**ステップ2: 追加ボタンをクリック**

「追加」ボタンをクリックします。ボタンが青色（アクティブ状態）になり、地図カーソルが十字に変わります。

**ステップ3: 地図上をクリック**

追加したい位置を地図上でクリックします。

- 新しい中間点が赤色の菱形マーカーとして表示されます
- ルート線が即座に再描画されます
- 中間点は自動的に最適な順序に並び替えられます

**ステップ4: 追加モードを解除**

「追加」ボタンを再度クリックすると、追加モードが解除されます。

**注意事項**:
- 追加モード中は、ルート選択を変更すると自動的にモードが解除されます
- 他のモード（移動・削除）ボタンをクリックすると、追加モードが解除されます

### 7.4 中間点の移動

**ステップ1: ルートを選択**

ドロップダウンで対象ルートを選択します。

**ステップ2: 移動ボタンをクリック**

「移動」ボタンをクリックします。ボタンが青色（アクティブ状態）になり、中間点マーカーにカーソルを合わせるとポインターに変わります。

**ステップ3: 中間点をクリック**

移動したい中間点をクリックします。カーソルが手の形に変わり、ドラッグ可能になります。

**ステップ4: ドラッグして移動**

中間点を目的の位置までドラッグします。

- ドラッグ中、ルート線がリアルタイムで更新されます
- ドラッグを終了すると、中間点が自動的に最適な順序に並び替えられます

**ステップ5: 移動モードを解除**

「移動」ボタンを再度クリックすると、移動モードが解除されます。

**注意事項**:
- 移動モード中は、複数の中間点を連続して移動できます
- ルート選択を変更すると自動的にモードが解除されます

### 7.5 中間点の削除

**ステップ1: ルートを選択**

ドロップダウンで対象ルートを選択します。

**ステップ2: 削除ボタンをクリック**

「削除」ボタンをクリックします。ボタンが青色（アクティブ状態）になり、中間点マーカーにカーソルを合わせるとポインターに変わります。

**ステップ3: 中間点をクリック**

削除したい中間点をクリックします。

- 中間点が即座に削除されます
- ルート線が再描画されます
- 残りの中間点が自動的に最適な順序に並び替えられます

**ステップ4: 削除モードを解除**

「削除」ボタンを再度クリックすると、削除モードが解除されます。

**注意事項**:
- 削除モード中は、複数の中間点を連続して削除できます
- ルート選択を変更すると自動的にモードが解除されます
- 削除は即座に実行されます（確認ダイアログなし）

### 7.6 ルートの最適化

**機能**: ルート上の中間点を、開始ポイントから終了ポイントまで最短経路に近い順序に自動並び替えします。

**ステップ1: ルートを選択**

ドロップダウンで対象ルートを選択します。

**ステップ2: 最適化ボタンをクリック**

「最適化」ボタンをクリックします。

- 中間点が最近傍貪欲法で並び替えられます
- ルート線が再描画されます
- 「ルートを最適化しました（xx個の中間点）」というメッセージが表示されます

**自動最適化**:

以下の操作後、自動的に最適化が実行されます（メッセージなし）：
- 中間点を追加した後
- 中間点を削除した後
- 中間点を移動（ドラッグ）した後

### 7.7 ルートのクリア

**機能**: 選択されたルートの全中間点を削除します。

**ステップ1: ルートを選択**

ドロップダウンで対象ルートを選択します。

**ステップ2: クリアボタンをクリック**

「クリア」ボタンをクリックします。

**ステップ3: 確認**

確認ダイアログが表示されます：
```
ルート T15 ～ T16 を削除しますか？
```

「OK」をクリックすると、以下の処理が実行されます：
- ルートの全中間点が削除されます
- ルート線が削除されます
- 開始・終了ポイントのマーカー色が緑色に戻ります
- ドロップダウンから該当ルートが削除されます

---

## 8. スポット編集機能

### 8.1 スポット編集モードの開始

**ステップ1: ファイルを読み込む**

先にGeoJSONファイルを読み込んでおく必要があります。

**ステップ2: スポット編集モードを選択**

制御パネルで「スポットの位置編集」ラジオボタンを選択します。

スポットパネルが表示され、以下の機能が使用できます：
- スポットの選択
- スポット名の編集
- スポットの追加・移動・削除

### 8.2 スポットの選択

**ドロップダウンで選択**:

スポットパネルの「スポット」ドロップダウンから、編集したいスポットを選択します。

**スポットハイライト**:

スポットを選択すると、地図上で以下のようにハイライト表示されます：
- スポット: 青色 → **シアン色**

**選択スポット名の表示**:

選択されたスポットの名前が「選択スポット」テキストボックスに表示されます。

### 8.3 スポット名の編集

**ステップ1: スポットを選択**

ドロップダウンで対象スポットを選択します。

**ステップ2: 名前を編集**

「選択スポット」テキストボックスに表示された名前を直接編集します。

**ステップ3: フォーカスを外す**

テキストボックスの外側をクリックするか、Tabキーを押してフォーカスを外すと、名前が自動保存されます。

- 「スポット名を更新しました」というメッセージが表示されます
- ドロップダウンの表示も更新されます

### 8.4 スポットの追加

**ステップ1: 追加・移動ボタンをクリック**

「追加・移動」ボタンをクリックします。ボタンが青色（アクティブ状態）になり、地図カーソルが十字に変わります。

**ステップ2: 地図上をクリック**

追加したい位置を地図上でクリックします。

- 新しいスポットが青色の正方形マーカーとして表示されます
- スポット名は自動生成されます（`仮1`, `仮2`, ...）
- 新しいスポットが自動的に選択され、ハイライト表示されます
- ドロップダウンに新しいスポットが追加されます

**ステップ3: スポット名を編集（オプション）**

必要に応じて、「選択スポット」テキストボックスでスポット名を編集します。

**ステップ4: 追加・移動モードを解除**

「追加・移動」ボタンを再度クリックすると、モードが解除されます。

### 8.5 スポットの移動

**ステップ1: スポットを選択**

ドロップダウンで対象スポットを選択します。

**ステップ2: 追加・移動ボタンをクリック**

「追加・移動」ボタンをクリックします。ボタンが青色（アクティブ状態）になります。

**ステップ3: スポットをドラッグ**

選択されたスポットマーカーをドラッグして目的の位置まで移動します。

- ドラッグを終了すると、「スポットの位置を更新しました」というメッセージが表示されます

**ステップ4: 追加・移動モードを解除**

「追加・移動」ボタンを再度クリックすると、モードが解除されます。

**注意事項**:
- 追加・移動モードでは、地図上クリックでスポット追加、スポットドラッグで移動の両方が可能です
- スポット選択を変更すると、新しく選択されたスポットが自動的にドラッグ可能になります

### 8.6 スポットの削除

**ステップ1: スポットを選択**

ドロップダウンで削除したいスポットを選択します。

**ステップ2: 削除ボタンをクリック**

「削除」ボタンをクリックします。

**ステップ3: 確認**

確認ダイアログが表示されます：
```
スポット「仮1」を削除しますか？
```

「OK」をクリックすると、以下の処理が実行されます：
- スポットが地図から削除されます
- ドロップダウンから該当スポットが削除されます
- 統計情報（スポット数）が更新されます
- 「スポットを削除しました」というメッセージが表示されます

---

## 9. 地図の操作方法

### 9.1 パン（移動）操作

- **マウス**: 地図をドラッグして移動
- **タッチデバイス**: 地図をスワイプして移動

### 9.2 ズーム操作

**ズームボタンを使う:**
- 右下の **[+]** ボタンをクリック → 拡大
- 右下の **[-]** ボタンをクリック → 縮小

**マウスホイールを使う:**
- マウスホイールを上に回す → 拡大
- マウスホイールを下に回す → 縮小

**ダブルクリックで拡大:**
- 地図をダブルクリックした場所を中心に拡大

**タッチデバイスのピンチ操作:**
- 2本指でピンチアウト → 拡大
- 2本指でピンチイン → 縮小

### 9.3 マーカーのポップアップ

地図上のマーカー（ポイント・ルート中間点・スポット）をクリックすると、名前がポップアップ表示されます。

**例**:
- ポイント「T15」をクリック → 「T15」と表示
- スポット「休憩所」をクリック → 「休憩所」と表示

---

## 10. マーカーの見方

地図上に表示されるマーカーは、フィーチャータイプによって色と形状が異なります。

### 10.1 マーカータイプ一覧

| タイプ | 色 | 形状 | サイズ | 説明 |
|--------|-----|------|--------|------|
| **ポイントGPS** | 緑色 | ● 円形 | 半径6px | ルートの開始・終了地点 |
| **ルート中間点** | 橙色 | ◆ 菱形 | 8x8px | ルート上の中間地点 |
| **スポット** | 青色 | ■ 正方形 | 12x12px | 休憩所・施設などの地点 |
| **ルート線** | 青色 | ─ 線 | 線幅3px | LineString/MultiLineString |
| **エリア** | 青色 | □ 面 | - | Polygon/MultiPolygon |

### 10.2 ハイライト表示

**ルート選択時**:
- 開始・終了ポイント: 緑色 → **赤色**
- ルート中間点: 橙色 → **赤色**
- ルート線: **赤色の線**

**スポット選択時**:
- スポット: 青色 → **シアン色**

### 10.3 編集モード時の表示

**追加モード（ルート・スポット）**:
- 地図カーソルが**十字**に変わります
- ボタンが**青色**（アクティブ状態）になります

**移動モード（ルート）**:
- 中間点マーカーにカーソルを合わせると**ポインター**に変わります
- クリックするとカーソルが**手の形**に変わり、ドラッグ可能になります

**削除モード（ルート）**:
- 中間点マーカーにカーソルを合わせると**ポインター**に変わります

### 10.4 統計情報の見方

制御パネルの統計情報は、読み込んだGeoJSONファイルの内容をリアルタイムで表示します。

| 項目 | 単位 | 説明 |
|------|------|------|
| ファイル | - | 読み込まれているファイル数（0または1） |
| ポイント | 点 | ポイントGPSの数 |
| ルート | 本 | ルート中間点のルートID数 |
| スポット | 個 | スポットポイント + Polygon/MultiPolygonの数 |

---

## 11. トラブルシューティング

### 11.1 地図が表示されない

**原因**: インターネット接続がない、またはローカルサーバーが起動していない

**対処法**:
1. インターネット接続を確認
2. ローカルサーバーが起動しているか確認
3. ブラウザのコンソールでエラーメッセージを確認

### 11.2 ファイルが読み込めない

**原因1**: ファイル形式が不正

**対処法**:
- GeoJSON形式（RFC 7946準拠）であることを確認
- JSON構文エラーがないかチェック

**原因2**: 文字エンコーディングが不正

**対処法**:
- ファイルがUTF-8エンコーディングであることを確認

### 11.3 マーカーが表示されない

**原因1**: 座標が日本国外

**対処法**:
- 座標値が正しいか確認（経度: 123-146度、緯度: 24-46度程度）

**原因2**: ジオメトリタイプが不正

**対処法**:
- `geometry.type` が `"Point"`, `"LineString"`, `"Polygon"` 等の有効な値であることを確認

### 11.4 ファイルが出力できない

**原因**: データが読み込まれていない

**対処法**:
- 先にGeoJSONファイルを読み込む

### 11.5 ルートが選択できない

**原因**: ルート中間点が存在しない

**対処法**:
- GeoJSONファイルに `type: "route_waypoint"` のフィーチャーが含まれているか確認
- `route_id` プロパティが正しい形式（`route_[開始ID]_to_[終了ID]`）であることを確認

### 11.6 中間点が追加・移動・削除できない

**原因1**: ルートが選択されていない

**対処法**:
- ドロップダウンで対象ルートを選択

**原因2**: モードが有効になっていない

**対処法**:
- 対応するボタン（追加・移動・削除）が青色（アクティブ状態）になっているか確認

### 11.7 スポットが追加・移動・削除できない

**原因1**: データが読み込まれていない

**対処法**:
- 先にGeoJSONファイルを読み込む

**原因2**: スポット編集モードが選択されていない

**対処法**:
- 制御パネルで「スポットの位置編集」ラジオボタンを選択

### 11.8 CORS エラーが表示される

**エラーメッセージ例**:
```
Access to script at 'file:///.../app.js' from origin 'null' has been blocked by CORS policy
```

**原因**: ローカルサーバーを使用していない

**対処法**:
- ローカルHTTPサーバーを起動する（`python -m http.server 8000` または `npx serve .`）
- `file://` プロトコルではなく `http://localhost:8000` でアクセスする

---

## 12. よくある質問

### Q1. 複数のGeoJSONファイルを同時に読み込めますか？

**A**: いいえ、現在のバージョンでは1ファイルずつの読み込みのみ対応しています。新しいファイルを読み込むと、前のファイルのデータは消去されます。

### Q2. 編集したデータは自動保存されますか？

**A**: いいえ、自動保存機能はありません。編集後は必ず「出力」ボタンでGeoJSONファイルを保存してください。

### Q3. 出力ファイル名を変更できますか？

**A**: Chrome/Edge等のFile System Access API対応ブラウザでは、保存ダイアログでファイル名を変更できます。非対応ブラウザでは、ダウンロード後に手動でリネームしてください。

### Q4. ルートの最適化アルゴリズムは何ですか？

**A**: 最近傍貪欲法（Nearest Neighbor Greedy Algorithm）を使用しています。開始ポイントから最も近い中間点を順番に選択していきます。これは局所最適解であり、必ずしも最短経路ではありませんが、実用上十分な精度です。

### Q5. 中間点の追加・移動・削除は即座に反映されますか？

**A**: はい、編集操作は即座に地図上に反映されます。ただし、GeoJSONファイルに保存するには「出力」ボタンをクリックする必要があります。

### Q6. オフラインで使用できますか？

**A**: いいえ、国土地理院の地図タイルを読み込むためインターネット接続が必要です。

### Q7. スマートフォン・タブレットで使用できますか？

**A**: はい、タッチ操作（スワイプ、ピンチ、ドラッグ）に対応しています。ただし、画面サイズが小さい場合は制御パネルが見にくい場合があります。

### Q8. 読み込んだファイルと同じフォルダに出力できますか？

**A**: Chrome/Edge等のFile System Access API対応ブラウザでは、ブラウザが最後に使用したフォルダを記憶し、保存ダイアログで提案されます。Firefox/Safari等では、ブラウザのデフォルトダウンロードフォルダに保存されます。

### Q9. 他の地図（Google Maps等）を使えますか？

**A**: 現在のバージョンでは国土地理院地図のみ対応しています。他の地図タイルへの変更は、`js/constants.js` の `GSI_TILE_URL` を編集することで可能です（開発者向け）。

### Q10. ポイント・ルート・スポットの色を変更できますか？

**A**: 現在のバージョンではUIからの変更はできません。色の変更は、`js/constants.js` の `FEATURE_STYLES` を編集することで可能です（開発者向け）。

### Q11. GeoJSON以外のファイル形式（KML、GPX等）に対応していますか？

**A**: いいえ、現在はGeoJSON形式のみ対応しています。

### Q12. データのバックアップは必要ですか？

**A**: 編集機能を使用する場合は、元のGeoJSONファイルを別途保管することを強くお勧めします。編集後のデータは「出力」ボタンで別ファイルとして保存してください。

### Q13. ルートの中間点数に上限はありますか？

**A**: 技術的な上限はありませんが、中間点が100点を超えると最適化処理に時間がかかる場合があります。

### Q14. スポットのPolygon（エリア）も編集できますか？

**A**: 現在のバージョンでは、Polygon型スポットの移動はできませんが、Point型スポットの移動は可能です。名称の編集はどちらのタイプでも可能です。

### Q15. 編集中にブラウザをリロードするとデータは消えますか？

**A**: はい、ブラウザをリロードすると、出力していない編集内容はすべて失われます。こまめに「出力」ボタンでファイルを保存してください。

---

## 13. 参考情報

### 13.1 関連ドキュメント

- [機能仕様書](funcspec-202510.md) - 詳細な技術仕様
- [GeoJSONデータ仕様書](dataspec-geojson.md) - データ構造の詳細
- [プロジェクト概要（開発者向け）](../CLAUDE.md) - 開発者向け情報

### 13.2 外部リンク

- [Leaflet.js公式ドキュメント](https://leafletjs.com/)
- [国土地理院地図](https://maps.gsi.go.jp/)
- [GeoJSON仕様（RFC 7946）](https://datatracker.ietf.org/doc/html/rfc7946)

---

## 14. サポート・お問い合わせ

本アプリケーションに関するご質問・ご要望は、プロジェクト管理者までお問い合わせください。

---

## 15. バージョン履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 1.0 | 2025-09-30 | 初版作成 |
| 2.0 | 2025-10-17 | ルート編集機能・スポット編集機能の追加、全体構成の見直し |

---

**本ドキュメントの最終更新日**: 2025年10月17日
